<!doctype html><html lang=en><head><meta charset=utf-8><title>Greg Barbieri</title><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><script src=https://kit.fontawesome.com/d86cd22b71.js crossorigin=anonymous></script>
<link href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><nav class="navbar navbar-expand-sm fixed-top"><div class=container><a class=navbar-brand href=/>Greg Barbieri</a><div class="collapse navbar-collapse"><ul class="nav navbar-nav mr-auto"></ul><ul class=navbar-nav><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown>Code Tutorials</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdown><a class=dropdown-item href=/code_topics/code_topics#math>Math</a>
<a class=dropdown-item href=/code_topics/code_topics#gis>GIS</a>
<a class=dropdown-item href=/code_topics/code_topics#data_sources>Data Sources</a>
<a class=dropdown-item href=/code_topics/code_topics#web_scraping>Web Scraping</a></div></li></ul></div></div></nav><main class=code_tutorial><div class=container style=padding-top:100px><div class=row><div class=col-sm-12><article><header><h1>Write to SQLite3 Table</h1></header><div class=content><p><a href=https://www.sqlitetutorial.net/sqlite-python/insert/>Write to table</a> in SQLite database.</p><h3 id=imports>Imports</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>sqlite3</span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>pandas</span> <span style=color:#007020;font-weight:700>as</span> <span style=color:#0e84b5;font-weight:700>pd</span>
</span></span></code></pre></div><h3 id=create-pandas-data-frame>Create Pandas Data Frame</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df <span style=color:#666>=</span> pd<span style=color:#666>.</span>DataFrame(data<span style=color:#666>=</span>[[<span style=color:#4070a0>&#39;apple&#39;</span>,<span style=color:#4070a0>&#39;iris&#39;</span>,<span style=color:#4070a0>&#39;oak&#39;</span>]],
</span></span><span style=display:flex><span>                  columns<span style=color:#666>=</span>[<span style=color:#4070a0>&#39;fruit&#39;</span>,<span style=color:#4070a0>&#39;flower&#39;</span>,<span style=color:#4070a0>&#39;tree&#39;</span>])
</span></span></code></pre></div><h3 id=connect-to-sqlite-database>Connect to SQLite database</h3><p>If database file does not exist, it will be created.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>db <span style=color:#666>=</span> sqlite3<span style=color:#666>.</span>connect(<span style=color:#4070a0>&#34;sqlite.db&#34;</span>)
</span></span></code></pre></div><h3 id=insert-pandas-dataframe-into-database>Insert Pandas DataFrame into Database</h3><p>Insert into database.</p><p><code>con</code> is the SQLite database connection. <code>name</code> is the name of the table in the SQLite database. <code>if_exists</code> determines how to handle inserting data conditional on the table existing or not.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#666>.</span>to_sql(con<span style=color:#666>=</span>db, name<span style=color:#666>=</span><span style=color:#4070a0>&#39;species&#39;</span>, if_exists<span style=color:#666>=</span><span style=color:#4070a0>&#39;append&#39;</span>)
</span></span></code></pre></div><h3 id=insert-data-as-tuple>Insert Data as Tuple</h3><p>Create cursor.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>cur <span style=color:#666>=</span> db<span style=color:#666>.</span>cursor()
</span></span></code></pre></div><p>Create table <code>species</code> if it does not exist.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sql <span style=color:#666>=</span> <span style=color:#4070a0>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4070a0>CREATE TABLE IF NOT EXISTS species (fruit, flower, tree);
</span></span></span><span style=display:flex><span><span style=color:#4070a0>&#34;&#34;&#34;</span>
</span></span></code></pre></div><p>Insert rows into the table <code>species</code>. <code>?</code> are place holders for row data, ordered by column left to right.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sql <span style=color:#666>=</span> <span style=color:#4070a0>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4070a0>INSERT INTO species(fruit, flower, tree)
</span></span></span><span style=display:flex><span><span style=color:#4070a0>     VALUES (?,?,?)
</span></span></span><span style=display:flex><span><span style=color:#4070a0>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>cur <span style=color:#666>=</span> conn<span style=color:#666>.</span>cursor()
</span></span><span style=display:flex><span>cur<span style=color:#666>.</span>execute(sql, (<span style=color:#4070a0>&#39;apple&#39;</span>, <span style=color:#4070a0>&#39;iris&#39;</span>, <span style=color:#4070a0>&#39;oak&#39;</span>))
</span></span></code></pre></div><p>Commit the changes to the database using the connection object, not the cursor object.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>db<span style=color:#666>.</span>commit()
</span></span></code></pre></div><p>Confirm that table exists by viewing all tables in the database.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sql <span style=color:#666>=</span> <span style=color:#4070a0>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4070a0>SELECT name 
</span></span></span><span style=display:flex><span><span style=color:#4070a0>  FROM sqlite_master
</span></span></span><span style=display:flex><span><span style=color:#4070a0> WHERE type = &#39;table&#39;
</span></span></span><span style=display:flex><span><span style=color:#4070a0>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cur<span style=color:#666>.</span>execute(sql)
</span></span><span style=display:flex><span>tables <span style=color:#666>=</span> cur<span style=color:#666>.</span>fetchall()
</span></span><span style=display:flex><span><span style=color:#007020>print</span>(tables)
</span></span></code></pre></div><p>Close the connection.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>conn<span style=color:#666>.</span>close()
</span></span></code></pre></div></div></article></div></div></div></main><footer class=footer><div class=container><span class=text-muted><p>Greg Barbieri &#183; 2022 &#183; <a href>License</a></p></span><div class="col-md-4 col-sm-6"></div></div></footer></body></html>