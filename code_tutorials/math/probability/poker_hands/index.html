<!doctype html><html lang=en><head><meta charset=utf-8><title>Greg Barbieri</title><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><script src=https://kit.fontawesome.com/d86cd22b71.js crossorigin=anonymous></script>
<link href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><nav class="navbar navbar-expand-sm fixed-top"><div class=container><a class=navbar-brand href=/>Greg Barbieri</a><div class="collapse navbar-collapse"><ul class="nav navbar-nav mr-auto"></ul><ul class=navbar-nav><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown>Code Tutorials</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdown><a class=dropdown-item href=/code_topics/code_topics#math>Math</a>
<a class=dropdown-item href=/code_topics/code_topics#gis>GIS</a>
<a class=dropdown-item href=/code_topics/code_topics#data_sources>Data Sources</a></div></li></ul></div></div></nav><main class=code_tutorial><div class=container style=padding-top:100px><div class=row><div class=col-sm-12><article><header><h1>Poker Hands</h1></header><div class=content><p>This problem is taken directly from Professor Morin&rsquo;s <a href=http://www.people.fas.harvard.edu/~djmorin/book.html>Probability For the Enthusiastic Beginner</a>, Chapter 1, page 38.</p><blockquote><ol><li>In a standard 52-card deck, how many different five-card poker hands are there of each of the following types?<br></li></ol></blockquote><ol><li>Full House</li><li>Straight Flush</li><li>Flush</li><li>Straight</li><li>One pair</li><li>Two pairs</li><li>Three of a kind</li><li>Four of a kind</li><li>None of the above</li></ol><h3 id=imports>Imports</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>itertools</span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>collections</span> <span style=color:#007020;font-weight:700>as</span> <span style=color:#0e84b5;font-weight:700>col</span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>numpy</span> <span style=color:#007020;font-weight:700>as</span> <span style=color:#0e84b5;font-weight:700>np</span>
</span></span></code></pre></div><h3 id=create-a-deck-of-cards>Create a Deck of Cards</h3><p>A deck of cards includes every unique pairing of the suits and ranks. The suits are represented by, diamonds = ‘D’, clubs = ‘C’, hearts = ‘H’, and spades = ‘S’. The ranks are represented as 2 - 10 in the usual fashion, but Jack = 11, Queen = 12, King = 13, and Ace = 14.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>suits <span style=color:#666>=</span> [<span style=color:#4070a0>&#39;D&#39;</span>,<span style=color:#4070a0>&#39;C&#39;</span>,<span style=color:#4070a0>&#39;H&#39;</span>,<span style=color:#4070a0>&#39;S&#39;</span>]
</span></span><span style=display:flex><span>ranks <span style=color:#666>=</span> [<span style=color:#007020>str</span>(x) <span style=color:#007020;font-weight:700>for</span> x <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(<span style=color:#40a070>2</span>,<span style=color:#40a070>15</span>)]
</span></span></code></pre></div><p>Perform a Cartesian product of suits and ranks, yielding every ordered pair. The result will have 52 elements, which is what we expect from a standard deck of cards.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>deck_of_cards <span style=color:#666>=</span> <span style=color:#007020>list</span>(itertools<span style=color:#666>.</span>product(ranks,suits))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020>len</span>(deck_of_cards)
</span></span></code></pre></div><pre><code>52
</code></pre><h3 id=create-all-5-card-poker-hands>Create All 5-Card Poker Hands</h3><p>Create all possible poker hands. The total number of poker hands is equal to the number of unordered 5 card arrangements, without repetitions, from 52 cards.</p><p>$$\binom{52}{5} = \frac{52!}{5!(52-5)!} = \frac{52!}{5!47!} = \frac{52 \times 51 \times 50 \times 49 \times 48}{5!} = 2,598,960$$</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>poker_hands <span style=color:#666>=</span> <span style=color:#007020>list</span>(itertools<span style=color:#666>.</span>combinations(deck_of_cards, <span style=color:#40a070>5</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020>print</span>(<span style=color:#007020>format</span>(<span style=color:#007020>len</span>(poker_hands), <span style=color:#4070a0>&#39;,d&#39;</span>))
</span></span></code></pre></div><pre><code>2,598,960
</code></pre><h3 id=mathematical-example>Mathematical Example</h3><p>A full house is made up of one three-of-a-kind and one two-of-a-kind. There are 13 choices (2 - Ace) for the rank appearing three times and 12 choices remaining for the rank that will appearing twice.</p><p>For the rank that appears three or two times, there are four suits. The number of ways to arrange four suits in three spots is
$\binom{4}{3}$ and in two spots is $\binom{4}{2}$.</p><p>The total number of full house hands is equal to:</p><p>$$13 \times 12 \times \binom{4}{3} \times \binom{4}{2} = 13 \times 12 \times \frac{4!}{3!(4-3)!} \times \frac{4!}{2!(4-2)!} = 13 \times 12 \times 4 \times 6 = 3,744$$</p><h3 id=find-all-hands>Find All Hands</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>full_house <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>one_pair <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>two_pair <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>straight_flush <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>flush_only <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>straight_only <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>foak <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>toak <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>high_card <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>for</span> hand <span style=color:#007020;font-weight:700>in</span> poker_hands:
</span></span><span style=display:flex><span>    ranks <span style=color:#666>=</span> []
</span></span><span style=display:flex><span>    suits <span style=color:#666>=</span> []
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>for</span> rank, suit <span style=color:#007020;font-weight:700>in</span> hand:
</span></span><span style=display:flex><span>        ranks<span style=color:#666>.</span>append(<span style=color:#007020>int</span>(rank))
</span></span><span style=display:flex><span>        suits<span style=color:#666>.</span>append(suit)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    ranks<span style=color:#666>.</span>sort()
</span></span><span style=display:flex><span>    ranks_diff <span style=color:#666>=</span> np<span style=color:#666>.</span>diff(ranks)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    rank_count <span style=color:#666>=</span> col<span style=color:#666>.</span>Counter(ranks)<span style=color:#666>.</span>most_common(<span style=color:#40a070>2</span>)
</span></span><span style=display:flex><span>    suit_count <span style=color:#666>=</span> col<span style=color:#666>.</span>Counter(suits)<span style=color:#666>.</span>most_common(<span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> <span style=color:#007020>all</span>(ranks_diff <span style=color:#666>==</span> <span style=color:#40a070>1</span>) <span style=color:#007020;font-weight:700>or</span> (<span style=color:#007020>all</span>(ranks_diff[:<span style=color:#40a070>3</span>] <span style=color:#666>==</span> <span style=color:#40a070>1</span>) <span style=color:#007020;font-weight:700>and</span> ranks_diff[<span style=color:#666>-</span><span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>9</span>):
</span></span><span style=display:flex><span>        hand_is_a_straight <span style=color:#666>=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>        hand_is_a_straight <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> suit_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>5</span>:
</span></span><span style=display:flex><span>        hand_is_a_flush <span style=color:#666>=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>        hand_is_a_flush <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Full House</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> rank_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>3</span> <span style=color:#007020;font-weight:700>and</span> rank_count[<span style=color:#40a070>1</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>2</span>:
</span></span><span style=display:flex><span>        full_house <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># One Pair</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> rank_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>2</span> <span style=color:#007020;font-weight:700>and</span> rank_count[<span style=color:#40a070>1</span>][<span style=color:#40a070>1</span>] <span style=color:#666>&lt;</span> <span style=color:#40a070>2</span>:
</span></span><span style=display:flex><span>        one_pair <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Two Pairs</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> rank_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>2</span> <span style=color:#007020;font-weight:700>and</span> rank_count[<span style=color:#40a070>1</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>2</span>:
</span></span><span style=display:flex><span>        two_pair <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Straight-only</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> (hand_is_a_straight <span style=color:#666>==</span> <span style=color:#40a070>1</span> <span style=color:#007020;font-weight:700>and</span> hand_is_a_flush <span style=color:#666>==</span> <span style=color:#40a070>0</span>):
</span></span><span style=display:flex><span>        straight_only <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Flush-only</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> (hand_is_a_straight <span style=color:#666>==</span> <span style=color:#40a070>0</span> <span style=color:#007020;font-weight:700>and</span> hand_is_a_flush <span style=color:#666>==</span> <span style=color:#40a070>1</span>):
</span></span><span style=display:flex><span>        flush_only <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Straight Flush</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> (hand_is_a_straight <span style=color:#666>==</span> <span style=color:#40a070>1</span> <span style=color:#007020;font-weight:700>and</span> hand_is_a_flush <span style=color:#666>==</span> <span style=color:#40a070>1</span>):
</span></span><span style=display:flex><span>        straight_flush <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Four of a kind</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> rank_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>4</span>:
</span></span><span style=display:flex><span>        foak <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Three of a kind</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> rank_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>==</span> <span style=color:#40a070>3</span> <span style=color:#007020;font-weight:700>and</span> rank_count[<span style=color:#40a070>1</span>][<span style=color:#40a070>1</span>] <span style=color:#666>!=</span> <span style=color:#40a070>2</span>:
</span></span><span style=display:flex><span>        toak <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># Determine high-card hand</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> rank_count[<span style=color:#40a070>0</span>][<span style=color:#40a070>1</span>] <span style=color:#666>&lt;=</span> <span style=color:#40a070>1</span> <span style=color:#007020;font-weight:700>and</span> hand_is_a_straight <span style=color:#666>==</span> <span style=color:#40a070>0</span> <span style=color:#007020;font-weight:700>and</span> hand_is_a_flush <span style=color:#666>==</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>        high_card <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020>print</span>(high_card, one_pair, two_pair, flush_only, straight_only, full_house, straight_flush)
</span></span></code></pre></div><pre><code>1302540 1098240 123552 5108 10200 3744 40
</code></pre></div></article></div></div></div></main><footer class=footer><div class=container><span class=text-muted><p>Greg Barbieri &#183; 2022 &#183; <a href>License</a></p></span><div class="col-md-4 col-sm-6"></div></div></footer></body></html>