<!doctype html><html lang=en><head><meta charset=utf-8><title>Greg Barbieri</title><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css rel=stylesheet><link href=/css/custom.css rel=stylesheet><script src=https://kit.fontawesome.com/d86cd22b71.js crossorigin=anonymous></script>
<link href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><nav class="navbar navbar-expand-sm fixed-top"><div class=container><a class=navbar-brand href=/>Greg Barbieri</a><div class="collapse navbar-collapse"><ul class="nav navbar-nav mr-auto"></ul><ul class=navbar-nav><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown>Code Tutorials</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdown><a class=dropdown-item href=/code_topics/code_topics#math>Math</a>
<a class=dropdown-item href=/code_topics/code_topics#gis>GIS</a>
<a class=dropdown-item href=/code_topics/code_topics#data_sources>Data Sources</a></div></li></ul></div></div></nav><main class=code_tutorial><div class=container style=padding-top:100px><div class=row><div class=col-sm-12><article><header><h1>Locate Costco Warehouses</h1></header><div class=content><p>Use Costco&rsquo;s store locator to find the location of stores programmatically. Web scraping involves many technical issues unique to each website. If the website changes slightly, the entire program could become worthless.</p><h3 id=imports>Imports</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>requests</span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>from</span> <span style=color:#0e84b5;font-weight:700>selenium</span> <span style=color:#007020;font-weight:700>import</span> webdriver
</span></span></code></pre></div><h3 id=open-store-locator>Open Store Locator</h3><p>Infer the structure of Costco&rsquo;s store locator URL by going to Costco&rsquo;s website and using the tool.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>base_url <span style=color:#666>=</span> <span style=color:#4070a0>&#39;https://www.costco.com/warehouse-locations&#39;</span>
</span></span></code></pre></div><p>Use Requests library to build the URL without requesting the HTML. The search parameter is called <code>1ocation</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>params <span style=color:#666>=</span> {<span style=color:#4070a0>&#39;location&#39;</span>: <span style=color:#4070a0>&#39;WASHINGTON DC&#39;</span>}
</span></span><span style=display:flex><span>url <span style=color:#666>=</span> requests<span style=color:#666>.</span>Request(<span style=color:#4070a0>&#39;GET&#39;</span>, base_url, params<span style=color:#666>=</span>params)<span style=color:#666>.</span>prepare()<span style=color:#666>.</span>url
</span></span></code></pre></div><p>Use Selenium to open Google Chrome to Costco&rsquo;s store locator for Washington, DC. Must pass the path to ChromeDriver directly or set the location in your system path.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>driver <span style=color:#666>=</span> webdriver<span style=color:#666>.</span>Chrome()
</span></span><span style=display:flex><span>driver<span style=color:#666>.</span>get(url)
</span></span></code></pre></div><h3 id=get-warehouse-name-and-url>Get Warehouse Name and URL</h3><p>Inspecting Costco&rsquo;s store locator, we can find the list of warehouses at the URL using the class tag <code>warehouse-name</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>whlst <span style=color:#666>=</span> [(wh<span style=color:#666>.</span>text, wh<span style=color:#666>.</span>get_property(<span style=color:#4070a0>&#39;href&#39;</span>)) <span style=color:#007020;font-weight:700>for</span> wh <span style=color:#007020;font-weight:700>in</span> driver<span style=color:#666>.</span>find_elements_by_class_name(<span style=color:#4070a0>&#39;warehouse-name&#39;</span>)]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>whlst[<span style=color:#40a070>0</span>]
</span></span></code></pre></div><pre><code>('Pentagon City',
 'https://www.costco.com/warehouse-locations/pentagon-city-arlington-va-233.html')
</code></pre><p>Print the first warehouse.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020>print</span>(whlst[<span style=color:#40a070>0</span>])
</span></span></code></pre></div><pre><code>('Pentagon City', 'https://www.costco.com/warehouse-locations/pentagon-city-arlington-va-233.html')
</code></pre><h3 id=get-warehouse-addresses>Get Warehouse Addresses</h3><p>Using the id tag <code>warehouse-list</code> we can find the address information, as well as other ancillary information associated with the store location. I will leave further data wrangling up to the user.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>whloc <span style=color:#666>=</span> driver<span style=color:#666>.</span>find_element_by_id(<span style=color:#4070a0>&#39;warehouse-list&#39;</span>)<span style=color:#666>.</span>text<span style=color:#666>.</span>splitlines()
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>whloc[:<span style=color:#40a070>5</span>]
</span></span></code></pre></div><pre><code>['1',
 'Pentagon City (2.88 mi)',
 '1200 S FERN ST',
 'ARLINGTON, VA 22202-2862',
 '(703) 413-2324']
</code></pre><h3 id=close-browser-end-session>Close Browser, End Session</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>driver<span style=color:#666>.</span>close()
</span></span><span style=display:flex><span>driver<span style=color:#666>.</span>quit()
</span></span></code></pre></div></div></article></div></div></div></main><footer class=footer><div class=container><span class=text-muted><p>Greg Barbieri &#183; 2022 &#183; <a href>License</a></p></span><div class="col-md-4 col-sm-6"></div></div></footer></body></html>